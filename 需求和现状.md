> 既当甲方又当乙方是什么感觉？

# 需求

在这个 App 上我想实现的功能有一箩筐，显然得先去把需求明确一下，先专注最重要，最核心的功能，再专注其它的。

于是，首先需要知道我的需求——让我的生活过的更有计划性，能明确每时每刻的目标。

我一直在使用《Todo 清单》这个 App，它很大程度上能够满足需求，但也有很多缺陷：

1. 同步功能很残疾，总是出篓子（主要是这点让我放弃它）
2. 没法定义一段日期的任务（考虑到定义周任务，月任务是我的一个挺想要的需求）
3. 没法登记任务进度等（只能通过编辑描述来间接地如此）

为此，我希望自己实现一个 Todo 清单，它**最首先**需要有这样的特性：

1. 强一致性的同步——本地不维护任何数据，完全从服务器中来，到服务器中去（这要求无法并发修改，但 tmd 哪有谁同时用两个终端去做修改的？）
2. 能定义段日期的任务，这样的任务将在这段日期中任何时候都可见（但其优先级低于当前任务）
   - 自然周，自然月应当是段日期的“字典项”，也可以显式指定段日期的起始时间和终止时间
3. 能查看当前，过去以及未来某日的合法的 task，其要按照优先级去降序展示，段日期的 task 段长度越大优先级越低
4. 能完成，登记进度，删除特定 TODO
5. 多用户

为了尽量方便，使用 todo.txt 的语法去表示 task，其中各部分以及 description 中各部分需要被 token 化，以在之后的格式化等需求中利用。

前端暂且使用 CLI，考虑用 nodejs 去写，以使其能方便地跨平台（毕竟 nodejs 挺好装的，代码分发也容易）。

其次，还需要有如下特性：

1. 能够按上下文，项目，优先级去筛选 task
2. 能够定义重复的任务
3. ……

# 第一阶段目标

1. [X] 实现 Task 解析器，将 todo.txt 的语法的字符串解析成 Task 对象，分离出项目，上下文和 kv tag，优先级，时间等
   - 从一开始就去妥善处理 kv tag，专门为其做抽象，比如去为每个 kv tag 去定义相关 Handler
2. [ ] 实现 Task 的最简单的增删改查（该整点mybatis了！）
3. [ ] 实现一个简单的权限系统用以区分用户
4. [ ] 使用控制台实现一个最简单的"前端"，实现**查看当前**（按优先级），添加，删除，完成，编辑 Task 的功能
   - 用Nodejs，进行适当抽象以供之后切换到React时重用

# 第二阶段

1. 使用 React 去实现前端
2. 实现重复 Task
3. 实现登记任务进度功能
4. 实现查看任一日的合法 Task

# 第三阶段

1. 实现筛选查看 Task
2. 实现 Task 统计功能
3. 自定义 Task 的显示（比如把各种 tag 转成真正的标签等形式，或者改改字体样式），让前端更性感
